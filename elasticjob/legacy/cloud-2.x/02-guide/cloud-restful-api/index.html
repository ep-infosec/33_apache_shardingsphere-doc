<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.20.7" />
    <meta name="description" content="">


    <link rel="shortcut icon" href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/img/favicon.ico" type="image/x-icon" />

    
    <title>RESTful API</title>
    <link href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/css/nucleus.css" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/css/theme.css" rel="stylesheet">
    <link href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/css/hugo-theme.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
    <style type="text/css">:root #header + #content > #left > #rlblock_left
    {display:none !important;}</style>
    <link rel="stylesheet" href="http://cdn.bootcss.com/highlight.js/9.8.0/styles/monokai-sublime.min.css">
<link rel="stylesheet" href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/css/style.css">
  </head>
  <body class="" data-url="/02-guide/cloud-restful-api/">
    
    <nav id="sidebar">
  <div id="header-wrapper">
    <div id="header">
      <img src="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/img/elastic-job.png" />
    </div>
</div>


  <div class="highlightable">
    <ul class="topics">
      
        
        
          
          
            
          
        
          
          
            
          
        
          
          
            
          
        
          
          
            
          
        
        
        
          
        
          
        
          
        
          
        
      
      
      
      

      
      
      
        
          
          
            
          
        
      
      
      

      <li class="dd-item  " data-nav-id="/00-overview/">
        <a href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/00-overview/">
          <span>
            
              <b>0. </b>
            
             概览
            
           </span>
        </a>
        
        <ul>
          
            <li class="dd-item " data-nav-id="/00-overview/intro/">
              <a href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/00-overview/intro/">
                <span>简介     </i></span>
              </a>
            </li>
          
            <li class="dd-item " data-nav-id="/00-overview/contribution/">
              <a href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/00-overview/contribution/">
                <span>贡献代码     </i></span>
              </a>
            </li>
          
        </ul>
        
      </li>
      
      
      

      
      
      
        
          
          
            
          
        
      
      
      

      <li class="dd-item  " data-nav-id="/01-start/">
        <a href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/01-start/">
          <span>
            
              <b>1. </b>
            
             起航
            
           </span>
        </a>
        
        <ul>
          
            <li class="dd-item " data-nav-id="/01-start/quick-start/">
              <a href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/01-start/quick-start/">
                <span>快速入门     </i></span>
              </a>
            </li>
          
            <li class="dd-item " data-nav-id="/01-start/faq/">
              <a href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/01-start/faq/">
                <span>FAQ     </i></span>
              </a>
            </li>
          
            <li class="dd-item " data-nav-id="/01-start/dev-guide/">
              <a href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/01-start/dev-guide/">
                <span>开发指南     </i></span>
              </a>
            </li>
          
            <li class="dd-item " data-nav-id="/01-start/deploy-guide/">
              <a href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/01-start/deploy-guide/">
                <span>部署指南     </i></span>
              </a>
            </li>
          
        </ul>
        
      </li>
      
      
      

      
      
      
        
          
          
            
          
        
      
      
      

      <li class="dd-item  parent" data-nav-id="/02-guide/">
        <a href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/02-guide/">
          <span>
            
              <b>2. </b>
            
             使用指南
            
           </span>
        </a>
        
        <ul>
          
            <li class="dd-item " data-nav-id="/02-guide/cloud-concepts/">
              <a href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/02-guide/cloud-concepts/">
                <span>核心概念     </i></span>
              </a>
            </li>
          
            <li class="dd-item " data-nav-id="/02-guide/cloud-web-console/">
              <a href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/02-guide/cloud-web-console/">
                <span>运维平台     </i></span>
              </a>
            </li>
          
            <li class="dd-item active" data-nav-id="/02-guide/cloud-restful-api/">
              <a href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/02-guide/cloud-restful-api/">
                <span>RESTful API     </i></span>
              </a>
            </li>
          
            <li class="dd-item " data-nav-id="/02-guide/high-availability/">
              <a href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/02-guide/high-availability/">
                <span>高可用     </i></span>
              </a>
            </li>
          
            <li class="dd-item " data-nav-id="/02-guide/event-trace/">
              <a href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/02-guide/event-trace/">
                <span>事件追踪     </i></span>
              </a>
            </li>
          
            <li class="dd-item " data-nav-id="/02-guide/local-executor/">
              <a href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/02-guide/local-executor/">
                <span>本地运行模式     </i></span>
              </a>
            </li>
          
        </ul>
        
      </li>
      
      
      

      
      
      
        
          
          
            
          
        
      
      
      

      <li class="dd-item  " data-nav-id="/03-design/">
        <a href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/03-design/">
          <span>
            
              <b>3. </b>
            
             设计规划
            
           </span>
        </a>
        
        <ul>
          
            <li class="dd-item " data-nav-id="/03-design/module/">
              <a href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/03-design/module/">
                <span>目录结构说明     </i></span>
              </a>
            </li>
          
            <li class="dd-item " data-nav-id="/03-design/roadmap/">
              <a href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/03-design/roadmap/">
                <span>未来线路规划     </i></span>
              </a>
            </li>
          
        </ul>
        
      </li>
      
      
    </ul>
    <hr>
     
  </div>
</nav>

        <section id="body">
        <div id="overlay"></div>

        <div class="padding highlightable">

            <div id="top-bar">
              
              <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                  <span id="sidebar-toggle-span">
                      <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                        <i class="fa fa-bars"></i>
                      </a>
                  </span>
                
                <span id="toc-menu"><a href=""><i class="fa fa-list-alt"></i></a></span>
                
                
                  
                  
                  
                    
                    
                <a href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/02-guide/" itemprop="url"><span itemprop="title">使用指南</span></a> <i class="fa fa-angle-right"></i>
                    
                  
                
                <span itemprop="title"> RESTful API</span>
              </div>
              
                  <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#发布作业应用">发布作业应用</a></li>
<li><a href="#修改作业应用配置">修改作业应用配置</a></li>
<li><a href="#注册作业">注册作业</a></li>
<li><a href="#修改作业配置">修改作业配置</a></li>
<li><a href="#注销作业">注销作业</a></li>
<li><a href="#触发一次作业">触发一次作业</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

              

            </div>
            
              <div id="body-inner">
                
                <h1>RESTful API</h1>
                



<p>Elastic-Job-Cloud提供APP发布及作业注册等RESTful API可通过curl操作。</p>

<h3 id="发布作业应用">发布作业应用</h3>

<p>url：app</p>

<p>方法：POST</p>

<p>参数类型：application/json</p>

<p>参数列表：</p>

<table>
<thead>
<tr>
<th>属性名</th>
<th align="left">类型</th>
<th align="left">是否必填</th>
<th align="left">缺省值</th>
<th align="left">描述</th>
</tr>
</thead>

<tbody>
<tr>
<td>appName</td>
<td align="left">String</td>
<td align="left">是</td>
<td align="left"></td>
<td align="left">作业应用名称。为Elastic-Job-Cloud的作业应用唯一标识</td>
</tr>

<tr>
<td>appURL</td>
<td align="left">String</td>
<td align="left">是</td>
<td align="left"></td>
<td align="left">作业应用所在路径。必须是可以通过网络访问到的路径</td>
</tr>

<tr>
<td>cpuCount</td>
<td align="left">double</td>
<td align="left">否</td>
<td align="left">1</td>
<td align="left">作业应用启动所需要的CPU数量</td>
</tr>

<tr>
<td>memoryMB</td>
<td align="left">double</td>
<td align="left">否</td>
<td align="left">128</td>
<td align="left">作业应用启动所需要的内存MB</td>
</tr>

<tr>
<td>bootstrapScript</td>
<td align="left">String</td>
<td align="left">是</td>
<td align="left"></td>
<td align="left">启动脚本，如：bin\start.sh</td>
</tr>

<tr>
<td>appCacheEnable</td>
<td align="left">bool</td>
<td align="left">否</td>
<td align="left">true</td>
<td align="left">每次执行作业时是否从缓存中读取应用。禁用则每次执行任务均从应用仓库下载应用至本地</td>
</tr>

<tr>
<td>eventTraceSamplingCount</td>
<td align="left">int</td>
<td align="left">否</td>
<td align="left">0</td>
<td align="left">常驻作业事件采样率统计条数，默认不采样全部记录。为避免数据量过大，可对频繁调度的常驻作业配置采样率，即作业每执行N次，才会记录作业执行及追踪相关数据</td>
</tr>
</tbody>
</table>

<pre><code class="language-shell">curl -l -H &quot;Content-type: application/json&quot; -X POST -d '{&quot;appName&quot;:&quot;foo_app&quot;,&quot;appURL&quot;:&quot;http://app_host:8080/foo-job.tar.gz&quot;,&quot;cpuCount&quot;:0.1,&quot;memoryMB&quot;:64.0,&quot;bootstrapScript&quot;:&quot;bin/start.sh&quot;,&quot;appCacheEnable&quot;:true,&quot;eventTraceSamplingCount&quot;:0}' http://elastic_job_cloud_host:8899/api/app
</code></pre>

<h3 id="修改作业应用配置">修改作业应用配置</h3>

<p>url：app</p>

<p>方法：PUT</p>

<p>参数类型：application/json</p>

<p>参数列表：</p>

<table>
<thead>
<tr>
<th>属性名</th>
<th align="left">类型</th>
<th align="left">是否必填</th>
<th align="left">缺省值</th>
<th align="left">描述</th>
</tr>
</thead>

<tbody>
<tr>
<td>appName</td>
<td align="left">String</td>
<td align="left">是</td>
<td align="left"></td>
<td align="left">作业应用名称。为Elastic-Job-Cloud的作业应用唯一标识</td>
</tr>

<tr>
<td>appCacheEnable</td>
<td align="left">bool</td>
<td align="left">是</td>
<td align="left">true</td>
<td align="left">每次执行作业时是否从缓存中读取应用。禁用则每次执行任务均从应用仓库下载应用至本地</td>
</tr>

<tr>
<td>eventTraceSamplingCount</td>
<td align="left">int</td>
<td align="left">否</td>
<td align="left">0</td>
<td align="left">常驻作业事件采样率统计条数，默认不采样全部记录。为避免数据量过大，可对频繁调度的常驻作业配置采样率，即作业每执行N次，才会记录作业执行及追踪相关数据</td>
</tr>
</tbody>
</table>

<pre><code class="language-shell">curl -l -H &quot;Content-type: application/json&quot; -X PUT -d '{&quot;appName&quot;:&quot;foo_app&quot;,&quot;appCacheEnable&quot;:true}' http://elastic_job_cloud_host:8899/api/app
</code></pre>

<h3 id="注册作业">注册作业</h3>

<p>url：job/register</p>

<p>方法：POST</p>

<p>参数类型：application/json</p>

<p>参数列表：</p>

<table>
<thead>
<tr>
<th>属性名</th>
<th align="left">类型</th>
<th align="left">是否必填</th>
<th align="left">缺省值</th>
<th align="left">描述</th>
</tr>
</thead>

<tbody>
<tr>
<td>jobName</td>
<td align="left">String</td>
<td align="left">是</td>
<td align="left"></td>
<td align="left">作业名称。为Elastic-Job-Cloud的作业唯一标识</td>
</tr>

<tr>
<td>appName</td>
<td align="left">String</td>
<td align="left">是</td>
<td align="left"></td>
<td align="left">作业应用名称。</td>
</tr>

<tr>
<td>jobClass</td>
<td align="left">String</td>
<td align="left">是</td>
<td align="left"></td>
<td align="left">作业实现类</td>
</tr>

<tr>
<td>jobType</td>
<td align="left">Enum</td>
<td align="left">是</td>
<td align="left"></td>
<td align="left">作业类型。SIMPLE，DATAFLOW，SCRIPT</td>
</tr>

<tr>
<td>jobExecutionType</td>
<td align="left">Enum</td>
<td align="left">是</td>
<td align="left"></td>
<td align="left">作业执行类型。TRANSIENT为瞬时作业，DAEMON为常驻作业</td>
</tr>

<tr>
<td>cron</td>
<td align="left">String</td>
<td align="left">是</td>
<td align="left"></td>
<td align="left">cron表达式，用于配置作业触发时间</td>
</tr>

<tr>
<td>shardingTotalCount</td>
<td align="left">int</td>
<td align="left">是</td>
<td align="left"></td>
<td align="left">作业分片总数</td>
</tr>

<tr>
<td>cpuCount</td>
<td align="left">double</td>
<td align="left">是</td>
<td align="left"></td>
<td align="left">单片作业所需要的CPU数量，最小值为0.001</td>
</tr>

<tr>
<td>memoryMB</td>
<td align="left">double</td>
<td align="left">是</td>
<td align="left"></td>
<td align="left">单片作业所需要的内存MB，最小值为1</td>
</tr>

<tr>
<td>shardingItemParameters</td>
<td align="left">String</td>
<td align="left">否</td>
<td align="left"></td>
<td align="left">分片序列号和参数用等号分隔，多个键值对用逗号分隔<br />分片序列号从0开始，不可大于或等于作业分片总数<br />如：<br/>0=a,1=b,2=c</td>
</tr>

<tr>
<td>jobParameter</td>
<td align="left">String</td>
<td align="left">否</td>
<td align="left"></td>
<td align="left">作业自定义参数<br />作业自定义参数，可通过传递该参数为作业调度的业务方法传参，用于实现带参数的作业<br />例：每次获取的数据量、作业实例从数据库读取的主键等</td>
</tr>

<tr>
<td>failover</td>
<td align="left">boolean</td>
<td align="left">否</td>
<td align="left">false</td>
<td align="left">是否开启失效转移，开启表示如果作业在一次任务执行中途宕机，允许将该次未完成的任务在另一作业节点上补偿执行</td>
</tr>

<tr>
<td>misfire</td>
<td align="left">boolean</td>
<td align="left">否</td>
<td align="left">false</td>
<td align="left">是否开启错过任务重新执行</td>
</tr>

<tr>
<td>beanName</td>
<td align="left">String</td>
<td align="left">否</td>
<td align="left"></td>
<td align="left">Spring容器中配置的bean名称</td>
</tr>

<tr>
<td>applicationContext</td>
<td align="left">String</td>
<td align="left">否</td>
<td align="left"></td>
<td align="left">Spring方式配置Spring配置文件相对路径以及名称，如：META-INF\applicationContext.xml</td>
</tr>

<tr>
<td>streamingProcess</td>
<td align="left">boolean</td>
<td align="left">否</td>
<td align="left">false</td>
<td align="left">DATAFLOW类型作业，是否流式处理数据<br />如果流式处理数据, 则fetchData不返回空结果将持续执行作业<br />如果非流式处理数据, 则处理数据完成后作业结束<br /></td>
</tr>

<tr>
<td>scriptCommandLine</td>
<td align="left">String</td>
<td align="left">否</td>
<td align="left"></td>
<td align="left">SCRIPT类型作业命令行执行脚本</td>
</tr>

<tr>
<td>jobProperties</td>
<td align="left">String</td>
<td align="left">否</td>
<td align="left"></td>
<td align="left">作业定制化属性，目前支持job_exception_handler和executor_service_handler，用于扩展异常处理和自定义作业处理线程池</td>
</tr>

<tr>
<td>description</td>
<td align="left">String</td>
<td align="left">否</td>
<td align="left"></td>
<td align="left">作业描述信息</td>
</tr>
</tbody>
</table>

<p>注册的作业可用Java和Spring两种启动方式，作业启动在<a href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/01-start/dev-guide/">开发指南</a>中有说明，这里只举例说明两种方式如何注册。</p>

<p>使用Transient的Script类型作业可直接将shell上传至appURL，而无需打成java包。如果只有单个shell文件可无需压缩。如是复杂shell或python等应用，仍可上传tar包，支持各种常见压缩格式。</p>

<p><strong>Java启动方式作业注册</strong></p>

<pre><code class="language-shell">curl -l -H &quot;Content-type: application/json&quot; -X POST -d '{&quot;jobName&quot;:&quot;foo_job&quot;,&quot;appName&quot;:&quot;foo_app&quot;,&quot;jobClass&quot;:&quot;yourJobClass&quot;,&quot;jobType&quot;:&quot;SIMPLE&quot;,&quot;jobExecutionType&quot;:&quot;TRANSIENT&quot;,&quot;cron&quot;:&quot;0/5 * * * * ?&quot;,&quot;shardingTotalCount&quot;:5,&quot;cpuCount&quot;:0.1,&quot;memoryMB&quot;:64.0,&quot;failover&quot;:true,&quot;misfire&quot;:true}' http://elastic_job_cloud_host:8899/api/job/register
</code></pre>

<p><strong>Spring启动方式作业注册</strong></p>

<pre><code class="language-shell">curl -l -H &quot;Content-type: application/json&quot; -X POST -d '{&quot;jobName&quot;:&quot;foo_job&quot;,&quot;appName&quot;:&quot;foo_app&quot;,&quot;jobClass&quot;:&quot;yourJobClass&quot;,&quot;beanName&quot;:&quot;yourBeanName&quot;,&quot;applicationContext&quot;:&quot;applicationContext.xml&quot;,&quot;jobType&quot;:&quot;SIMPLE&quot;,&quot;jobExecutionType&quot;:&quot;TRANSIENT&quot;,&quot;cron&quot;:&quot;0/5 * * * * ?&quot;,&quot;shardingTotalCount&quot;:5,&quot;cpuCount&quot;:0.1,&quot;memoryMB&quot;:64.0,&quot;failover&quot;:false,&quot;misfire&quot;:true}' http://elastic_job_cloud_masterhost:8899/api/job/register
</code></pre>

<h3 id="修改作业配置">修改作业配置</h3>

<p>url：job/update</p>

<p>方法：PUT</p>

<p>参数类型：application/json</p>

<p>参数：同注册作业</p>

<pre><code class="language-shell">curl -l -H &quot;Content-type: application/json&quot; -X PUT -d 
'{&quot;jobName&quot;:&quot;foo_job&quot;,&quot;appName&quot;:&quot;foo_app&quot;,&quot;jobClass&quot;:&quot;yourJobClass&quot;,&quot;jobType&quot;:&quot;SIMPLE&quot;,&quot;jobExecutionType&quot;:&quot;TRANSIENT&quot;,&quot;cron&quot;:&quot;0/5 * * * * ?&quot;,&quot;shardingTotalCount&quot;:5,&quot;cpuCount&quot;:0.1,&quot;memoryMB&quot;:64.0,&quot;failover&quot;:true,&quot;misfire&quot;:true}' http://elastic_job_cloud_host:8899/api/job/update
</code></pre>

<h3 id="注销作业">注销作业</h3>

<p>url：job/deregister</p>

<p>方法：DELETE</p>

<p>参数类型：application/json</p>

<p>参数：作业名称</p>

<pre><code class="language-shell">curl -l -H &quot;Content-type: application/json&quot; -X DELETE -d 'foo_job' http://elastic_job_cloud_host:8899/api/job/deregister
</code></pre>

<h3 id="触发一次作业">触发一次作业</h3>

<p>url：job/trigger</p>

<p>方法：POST</p>

<p>参数类型：application/json</p>

<p>参数：作业名称</p>

<p>说明：即事件驱动，通过调用API而非定时的触发作业。目前仅对Transient作业类型生效。</p>

<pre><code class="language-shell">curl -l -H &quot;Content-type: application/json&quot; -X POST -d 'foo_job' http://elastic_job_cloud_host:8899/api/job/trigger
</code></pre>


      
      
      </div>
    </div>

    

    <div id="navigation">
        
        <a class="nav nav-prev" href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/02-guide/cloud-web-console/"> <i class="fa fa-chevron-left"></i></a>
        <a class="nav nav-next" href="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/02-guide/high-availability/" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
    </div>

    </section>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/js/clipboard.min.js"></script>
    <script src="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/js/perfect-scrollbar.min.js"></script>
    <script src="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/js/perfect-scrollbar.jquery.min.js"></script>
    <script src="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/js/jquery.sticky-kit.min.js"></script>
    <script src="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/js/featherlight.min.js"></script>
    <script src="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/js/html5shiv-printshiv.min.js"></script>
    <script src="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/js/learn.js"></script>
    <script src="https://shardingsphere.apache.org/elasticjob/legacy/cloud-2.x/js/hugo-learn.js"></script>
    <script src="http://cdn.bootcss.com/highlight.js/9.8.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

  </body>
</html>

